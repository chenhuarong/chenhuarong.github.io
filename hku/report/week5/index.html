<!DOCTYPE html>
<html>
<head>
<title>week5</title>
<style>
/* 
Name: GeekPark article style for Mou app
Author: hzlzh(hzlzh.dev@gmail.com)
URL: https://github.com/GeekPark/Doc/blob/master/GeekPark/GeekPark-Style-for-Mou.css
*/
@charset "UTF-8";
body{ font:13px/1.4 Helvetica, arial, freesans, clean, sans-serif; color:#333333; padding-top:10px; padding-bottom:10px; background-color:white; padding:30px; }
body > *:first-child{ margin-top:0 !important; }
body > *:last-child{ margin-bottom:0 !important; }
a{ color:#109EFF; text-decoration:none; }
a:hover{ border-bottom:1px dotted #109EFF; }
a:visited, a:active{ color:#109EFF; }
a.absent{ color:#cc0000; }
a.anchor{ display:block; padding-left:30px; margin-left:-30px; cursor:pointer; position:absolute; top:0; left:0; bottom:0; }
p a{ margin:0 2px; }
h1, h2, h3, h4, h5, h6{ color:#333333; margin:20px 0 10px; padding:0; font-weight:bold; -webkit-font-smoothing:antialiased; cursor:text; position:relative; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor{ background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center; text-decoration:none; }
h1 tt, h1 code{ font-size:inherit; }
h2 tt, h2 code{ font-size:inherit; }
h3 tt, h3 code{ font-size:inherit; }
h4 tt, h4 code{ font-size:inherit; }
h5 tt, h5 code{ font-size:inherit; }
h6 tt, h6 code{ font-size:inherit; }
h1{ font-size:18px; font-weight:bold; line-height:22px; margin-bottom:5px; color:#333; }
h2{ font-size:16px; font-weight:bolder; line-height:18px; margin:20px 0; }
h3{ font-size:14px; }
h4{ color:#666; font-size:14px; font-weight:bolder; line-height:18px; margin:20px 0; }
h5{ font-size:14px; }
h6{ color:#777777; font-size:14px; }
p, blockquote, ul, ol, dl, li, table, pre{ margin:15px 0; line-height:150%; }
hr{ background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0; border:0 none; color:#cccccc; height:4px; padding:0; }
body > h2:first-child{ margin-top:0; padding-top:0; }
body > h1:first-child{ margin-top:0; padding-top:0; }
body > h1:first-child + h2{ margin-top:0; padding-top:0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child{ margin-top:0; padding-top:0; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6{ margin-top:0; padding-top:0; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p{ margin-top:0; }
li p.first{ display:inline-block; }
li{ font-size:14px; line-height:150%; margin-bottom:5px; margin-top:0; }
ul, ol{ padding-left:30px; }
ul :first-child, ol :first-child{ margin-top:0; }
dl{ padding:0; }
dl dt{ font-size:14px; font-weight:bold; font-style:italic; padding:0; margin:15px 0 5px; }
dl dt:first-child{ padding:0; }
dl dt > :first-child{ margin-top:0; }
dl dt > :last-child{ margin-bottom:0; }
dl dd{ margin:0 0 15px; padding:0 15px; }
dl dd > :first-child{ margin-top:0; }
dl dd > :last-child{ margin-bottom:0; }
blockquote{ background:url("data:image/png;base64,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") no-repeat scroll left 11px transparent; color:#999999; margin-left:28px; min-height:30px; padding:17px 40px 0; }
blockquote p{ color:#999999 !important; margin-bottom:25px !important; }
blockquote > :first-child{ margin-top:0; }
blockquote > :last-child{ margin-bottom:0; }
table{ padding:0; border-collapse:collapse; }
table tr{ border-top:1px solid #cccccc; background-color:white; margin:0; padding:0; }
table tr:nth-child(2n){ background-color:#f8f8f8; }
table tr th{ font-weight:bold; border:1px solid #cccccc; text-align:left; margin:0; padding:6px 13px; }
table tr td{ border:1px solid #cccccc; text-align:left; margin:0; padding:6px 13px; }
table tr th :first-child, table tr td :first-child{ margin-top:0; }
table tr th :last-child, table tr td :last-child{ margin-bottom:0; }
img{ border:1px solid #E1E1E1; margin:0 auto 10px; display:block; max-width:512px; padding:5px; }
span.frame{ display:block; overflow:hidden; }
span.frame > span{ border:1px solid #dddddd; display:block; float:left; overflow:hidden; margin:13px 0 0; padding:7px; width:auto; }
span.frame span img{ display:block; float:left; }
span.frame span span{ clear:both; color:#333333; display:block; padding:5px 0 0; }
span.align-center{ display:block; overflow:hidden; clear:both; }
span.align-center > span{ display:block; overflow:hidden; margin:13px auto 0; text-align:center; }
span.align-center span img{ margin:0 auto; text-align:center; }
span.align-right{ display:block; overflow:hidden; clear:both; }
span.align-right > span{ display:block; overflow:hidden; margin:13px 0 0; text-align:right; }
span.align-right span img{ margin:0; text-align:right; }
span.float-left{ display:block; margin-right:13px; overflow:hidden; float:left; }
span.float-left span{ margin:13px 0 0; }
span.float-right{ display:block; margin-left:13px; overflow:hidden; float:right; }
span.float-right > span{ display:block; overflow:hidden; margin:13px auto 0; text-align:right; }
code, tt{ margin:0 2px; padding:0 5px; white-space:nowrap; border:1px solid #eaeaea; background-color:#f8f8f8; border-radius:3px; }
pre code{ margin:0; padding:0; white-space:pre; border:none; background:transparent; }
.highlight pre{ background-color:#f8f8f8; border:1px solid #cccccc; font-size:13px; line-height:19px; overflow:auto; padding:6px 10px; border-radius:3px; }
pre{ background-color:#f8f8f8; border:1px solid #cccccc; font-size:13px; line-height:19px; overflow:auto; padding:6px 10px; border-radius:3px; }
pre code, pre tt{ background-color:transparent; border:none; }
@media screen and (min-width: 914px){
    body{ width:854px; margin:0 auto; }
}
</style>
</head>
<body>
<h1 id="weeklyreport:week5180814-240814">Weekly Report: Week 5 (18/08/14 - 24/08/14)</h1>

<p><strong>Chen Huarong <a href="mailto:i@chr.asia">i@chr.asia</a></strong> <em>25/08/14</em></p>
<!-- 
{Syntax quick reference}
Link: [Text](link)  <a target="_blank" href=""></a>
Image: ![Title](link)
-->

<h2 id="1.summary">1. Summary</h2>

<ul>
<li>I implemented 3 different synthesizing methods about <strong>example based stylization</strong>.</li>
<li>In this report, I will present their results and do some comparisons and analysis.</li>
</ul>

<h2 id="2.problembackground">2. Problem Background</h2>

<p><img src="target.jpg" alt="" />
As shown in the figure above, <strong>example based stylization</strong> is a method of <strong>image analogy</strong>. It can apply an existing style, which is described by style input <span class="math">\(S\)</span> and output <span class="math">\(\hat{S}\)</span>, to an input image <span class="math">\(I\)</span> and synthesize the output image <span class="math">\(\hat{I}\)</span>.</p>

<p>In the past 4 weeks, I tried to synthesize <span class="math">\(\hat{I}\)</span> by segmenting <span class="math">\(I\)</span> into some &#8220;most like&#8221; regions and synthesize in the regions independently.</p>

<p>Following is a result synthesized a week ago.</p>

<figure>
<img src="last_week.jpg" alt="" />
</figure>

<h2 id="3.threesynthesizingmethods">3. Three Synthesizing Methods</h2>

<p>The result above has no consideration of spatial coherence. I tried 3 different synthesizing methods with spatial coherence consideration.</p>

<h3 id="3.0.spatialcoherence">3.0. Spatial Coherence</h3>

<p>The stylized output <span class="math">\(\hat{I}\)</span> should be spatially as continuous as possible. Usually, spatial coherence is acquired by adding terms describing relations between neighbors.</p>

<p>In the following 3 methods, spatial coherence term is described by the similarity of small patch(with patch size of 1 to 3) in <span class="math">\(I\)</span> and its correspondence patch in <span class="math">\(S\)</span>.</p>

<h3 id="3.1.pixel-basedsynthesizingwithpatchmatch-likeoptimizing">3.1. Pixel-based Synthesizing with &#8220;PatchMatch-like&#8221; Optimizing</h3>

<p>PatchMatch is an algorithm that can find approximate nearest patch neighbor in a short time. It is a process of optimizing and updating. It can be simply described by 3 steps: find a patch, calculate the distance, replace the patch if the distance is smaller.</p>

<p>The pixel-based synthesizing is similar to the PatchMatch&#8217;s 3 steps. When calculating the distance, we can do synthesis and check if the synthesized result has smaller distance(if not, we can restore the patch before synthesizing).</p>

<p>In the distance function, I take 3 terms into consideration: </p>

<ul>
<li>Distance of RGB between pixel pair in <span class="math">\(I\)</span> and <span class="math">\(\hat{I}\)</span></li>
<li>Distance of luminance between pixel in <span class="math">\(\hat{I}\)</span> and corresponding pixel in <span class="math">\(\hat{S}\)</span></li>
<li>Similarity of RGB between patches centered with pixel in <span class="math">\(I\)</span> and corresponding pixel in <span class="math">\(S\)</span></li>
</ul>

<p>Following are the results:</p>

<p><img src="pixel_sea.jpg" alt="" /> <img src="pixel_head.jpg" alt="" /></p>

<h3 id="3.2.region-basedsynthesizingwithgaussianblurincontours">3.2. Region-based Synthesizing with Gaussian Blur in Contours</h3>

<p>One of my results a week ago(see following) was synthesized by the segmentation of &#8220;most-like&#8221; regions and the result looks fragmented. Specially, for this result, I applied Gaussian blur in contours of the regions to make it look better.</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Before</th>
	<th style="text-align:left;">After</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><img src="sea_s.jpg" alt="" /></td>
	<td style="text-align:left;"><img src="sea_dipped.jpg" alt="" /></td>
</tr>
</tbody>
</table>

<p>Anyhow, the result is not as good as expected. What&#8217;s more, it is not suitable for stylizations that are strict in preserving details.</p>

<h3 id="3.3.region-basedsynthesizingwithrandomoptimizing">3.3. Region-based Synthesizing with Random Optimizing</h3>

<p>Gaussian blur is helpful in keeping spatial coherence in adjacent areas but will lose details. The biggest weakness of the result synthesized by &#8220;most-like&#8221; regions is the spatial coherence. To overcome it, I applied a random optimizing that has consideration of spatial coherence and acquired a better result.</p>

<p>The optimization is made up with several iterations. In every iteration, the algorithm randomly choose one &#8220;most-like&#8221; region and re-synthesize it pixel-by-pixel, taking the similarity of corresponding patches in <span class="math">\(I\)</span> and <span class="math">\(S\)</span> into consideration.</p>

<p>Followings are results with/without random optimizing.</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Without Random Optimizing</th>
	<th style="text-align:left;">With Random Optimizing</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><img src="sea1.jpg" alt="" /></td>
	<td style="text-align:left;"><img src="sea2.jpg" alt="" /></td>
</tr>
<tr>
	<td style="text-align:left;"><img src="fat1.jpg" alt="" /></td>
	<td style="text-align:left;"><img src="fat2.jpg" alt="" /></td>
</tr>
<tr>
	<td style="text-align:left;"><img src="head1.jpg" alt="" /></td>
	<td style="text-align:left;"><img src="head2.jpg" alt="" /></td>
</tr>
</tbody>
</table>

<h3 id="3.4.comparisons">3.4. Comparisons</h3>

<p>By experiments, the advantages and disadvantages of above synthesizing methods are listed as follows:</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Method</th>
	<th style="text-align:left;">Advantages</th>
	<th style="text-align:left;">Disadvantages</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">3.1</td>
	<td style="text-align:left;">Better in the visual perception of colors.</td>
	<td style="text-align:left;">Lose texture. Slow.</td>
</tr>
<tr>
	<td style="text-align:left;">3.2</td>
	<td style="text-align:left;">Smooth transition in region contours. Can keep texture in inner areas.</td>
	<td style="text-align:left;">Lose details in contours. Has obvious difference between regions.</td>
</tr>
<tr>
	<td style="text-align:left;">3.3</td>
	<td style="text-align:left;">Good at keeping textures. Keep spatial coherence partially.</td>
	<td style="text-align:left;">Relies heavily on random optimizing. Can not synthesize rotated textures.</td>
</tr>
</tbody>
</table>

<p><strong>Common problems</strong>: The distance function(or energy function) has a significant impact to the results. Finding a good function requires much of experience.</p>
<script type='text/javascript' src='https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
</body>
</html>